import t from"vue";function n(){return(n=Object.assign||function(t){for(var n,e=1;e<arguments.length;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)}var e=["attrs","props","domProps"],r=["class","style","directives"],o=["on","nativeOn"],u=function(t,n){return function(){t&&t.apply(this,arguments),n&&n.apply(this,arguments)}},i=function(t){return t.reduce((function(t,i){for(var a in i)if(t[a])if(-1!==e.indexOf(a))t[a]=n({},t[a],i[a]);else if(-1!==r.indexOf(a)){var c=t[a]instanceof Array?t[a]:[t[a]],s=i[a]instanceof Array?i[a]:[i[a]];t[a]=c.concat(s)}else if(-1!==o.indexOf(a))for(var f in i[a])if(t[a][f]){var l=t[a][f]instanceof Array?t[a][f]:[t[a][f]],p=i[a][f]instanceof Array?i[a][f]:[i[a][f]];t[a][f]=l.concat(p)}else t[a][f]=i[a][f];else if("hook"==a)for(var h in i[a])t[a][h]=t[a][h]?u(t[a][h],i[a][h]):i[a][h];else t[a]=i[a];else t[a]=i[a];return t}),{})};function a(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function n(e){return 0===arguments.length||a(e)?n:t.apply(this,arguments)}}function s(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return a(e)?n:c((function(n){return t(e,n)}));default:return a(e)&&a(r)?n:a(e)?c((function(n){return t(n,r)})):a(r)?c((function(n){return t(e,n)})):t(e,r)}}}function f(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,o){return n.apply(this,arguments)};case 5:return function(t,e,r,o,u){return n.apply(this,arguments)};case 6:return function(t,e,r,o,u,i){return n.apply(this,arguments)};case 7:return function(t,e,r,o,u,i,a){return n.apply(this,arguments)};case 8:return function(t,e,r,o,u,i,a,c){return n.apply(this,arguments)};case 9:return function(t,e,r,o,u,i,a,c,s){return n.apply(this,arguments)};case 10:return function(t,e,r,o,u,i,a,c,s,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var l=s((function(t,n){return 1===t?c(n):f(t,function t(n,e,r){return function(){for(var o=[],u=0,i=n,c=0;c<e.length||u<arguments.length;){var s;c<e.length&&(!a(e[c])||u>=arguments.length)?s=e[c]:(s=arguments[u],u+=1),o[c]=s,a(s)||(i-=1),c+=1}return i<=0?r.apply(this,o):f(i,t(n,o,r))}}(t,[],n))})),p=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function h(t){return"function"==typeof t["@@transducer/step"]}function d(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!p(o)){for(var u=0;u<t.length;){if("function"==typeof o[t[u]])return o[t[u]].apply(o,r);u+=1}if(h(o)){var i=n.apply(null,r);return i(o)}}return e.apply(this,arguments)}}var y=function(){return this.xf["@@transducer/init"]()},v=function(t){return this.xf["@@transducer/result"](t)};var g=c((function(t){return!!p(t)||!!t&&("object"==typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),b=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();var m=s((function(t,n){return f(t.length,(function(){return t.apply(n,arguments)}))}));function O(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function w(t,n,e,r){return t["@@transducer/result"](e[r](m(t["@@transducer/step"],t),n))}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function x(t,n,e){if("function"==typeof t&&(t=function(t){return new b(t)}(t)),g(e))return function(t,n,e){for(var r=0,o=e.length;r<o;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return w(t,n,e,"fantasy-land/reduce");if(null!=e[j])return O(t,n,e[j]());if("function"==typeof e.next)return O(t,n,e);if("function"==typeof e.reduce)return w(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}function C(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var S=Object.prototype.toString,A=!{toString:null}.propertyIsEnumerable("toString"),k=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],P=function(){return arguments.propertyIsEnumerable("length")}(),E=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},$=c("function"!=typeof Object.keys||P?function(t){if(Object(t)!==t)return[];var n,e,r=[],o=P&&function(){return"[object Arguments]"===S.call(arguments)?function(t){return"[object Arguments]"===S.call(t)}:function(t){return C("callee",t)}}(t);for(n in t)!C(n,t)||o&&"length"===n||(r[r.length]=n);if(A)for(e=k.length-1;e>=0;)C(n=k[e],t)&&!E(r,n)&&(r[r.length]=n),e-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),N=c((function(t){return l(t.length,t)}));var I=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=y,t.prototype["@@transducer/result"]=v,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),L=s(d(["filter"],s((function(t,n){return new I(t,n)})),(function(t,n){return e=n,"[object Object]"===Object.prototype.toString.call(e)?x((function(e,r){return t(n[r])&&(e[r]=n[r]),e}),{},$(n)):function(t,n){for(var e=0,r=n.length,o=[];e<r;)t(n[e])&&(o[o.length]=n[e]),e+=1;return o}(t,n);var e}))),T=function(){function t(t,n){this.xf=n,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=y,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){var e;return this.f(n)&&(this.found=!0,t=(e=this.xf["@@transducer/step"](t,n))&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}),t},t}(),B=s(d(["find"],s((function(t,n){return new T(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return n[e];e+=1}})));var z="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1,r=arguments.length;e<r;){var o=arguments[e];if(null!=o)for(var u in o)C(u,o)&&(n[u]=o[u]);e+=1}return n},D=s((function(t,n){return z({},t,n)}));const F=N((t,n)=>!!B(t=>t===n,t)),W=t=>t.preventDefault(),X={container:"div",containerClass:"dialog-wrapper",data:{},transitionName:"fade",containerStyle:{zIndex:999},closeButtonClass:"close-btn"},_={awaitClose:!0},q=t.extend({name:"abc",data:()=>({visible:!0,id:"",closed:!1,onClose:(t,n,...e)=>{}}),watch:{closed(t){t&&(this.visible=!1)}},methods:{close(t,...n){this.closed=!0,this.onClose&&"function"==typeof this.onClose&&this.onClose(this,t,...n)},handleAfterLeave(){this.$destroy(),this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}}),G=(t,n)=>e=>new Promise((r,o)=>{const{type:u,data:a={text:"hi father",a:"s"},awaitClose:c,containerStyle:s={},maskClosable:f,containerClass:l}=D(_,e),p=c?(t,n)=>{r({instance:t,type:n})}:e.onClose,h=t[u]||[],d=F(h),y=new q({data:()=>({onClose:p}),render:function(t){const r=L(t=>!("string"==typeof t||!t.component),h).map(n=>{const{component:r,on:o,slot:u,className:c}=n,{on:s}=e,f=s?D(o||{},s):o,l={close:(t="close",...n)=>this.close(t,...n)},p=f?Object.keys(f).reduce((t,n)=>{const e=f[n];return"function"==typeof e?t[n]=(t,...n)=>{e(this,t,...n)}:("div"!==r&&r.name===e.name||"div"===r&&e.name===c)&&(t[n]=(t,...n)=>{e.fn(this,t,...n)}),t},Object.create({})):{},h=D(l,p),d=D(n.defaultProps||{},a);return t(r,i([{attrs:{...d}},{on:h},{class:c}]),[u])}),{container:o,containerClass:c,data:s,transitionName:p,containerStyle:y,closeButtonClass:v,maskClosable:g}=D(X,n||{}),b=[];d("close")&&b.push(t("div",{class:v,on:{click:()=>this.close("close")}}));const m=[u];return c&&m.push(c),l&&m.push(l),t("transition",{attrs:{name:p},on:{afterLeave:this.handleAfterLeave}},[t("div",{directives:[{name:"show",value:this.visible}],class:"fixed-wrapper",on:{touchmove:W},attrs:{...s},style:y},[t(o,{class:(O=m,O.reduce((t,n)=>t+=" "+n,""))},[b,r]),t("div",{on:{click:()=>{(f||g)&&this.close("close")}},class:"mask-wrapper"})])]);var O}});y.$mount(),document.body.appendChild(y.$el),c||r({instance:y,type:"instance"})});export{G as createVfModal};
